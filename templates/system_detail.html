{% extends "base.html" %}

{% block title %}{{ stream.name }} - System Details{% endblock %}

{% block content %}
<h1 style="color: #1e3a5f; margin-bottom: 1rem;">{{ stream.name }}</h1>
<p style="color: #666; margin-bottom: 2rem;">{{ stream.description }}</p>

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 1.5rem; border-radius: 8px;">
        <div style="font-size: 2rem; font-weight: 600;">{{ stats.total }}</div>
        <div>Total Submissions</div>
    </div>
    <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 1.5rem; border-radius: 8px;">
        <div style="font-size: 2rem; font-weight: 600;">{{ stats.pass_rate }}%</div>
        <div>Pass Rate</div>
    </div>
    <div style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; padding: 1.5rem; border-radius: 8px;">
        <div style="font-size: 2rem; font-weight: 600;">
            {% if health.days_since_last is not none %}{{ health.days_since_last }}{% else %}â€”{% endif %}
        </div>
        <div>Days Since Last</div>
    </div>
</div>

<div style="text-align: center; margin-bottom: 2rem;">
    <a href="/submit/{{ stream.id }}" class="btn btn-success" style="padding: 1rem 2rem; font-size: 1.1rem;">
        ðŸ“¤ Submit New Data
    </a>
</div>

<div class="card">
    <div class="card-header">Recent Submissions</div>
    {% if submissions %}
    <table>
        <thead>
            <tr>
                <th>Filename</th>
                <th>Timestamp</th>
                <th>Rows</th>
                <th>Status</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for submission in submissions %}
            <tr>
                <td>{{ submission.filename }}</td>
                <td>{{ submission.timestamp }}</td>
                <td>{{ submission.row_count }}</td>
                <td>
                    {% if submission.status == 'passed' %}
                        <span class="badge badge-success">Passed</span>
                    {% elif submission.status == 'failed' %}
                        <span class="badge badge-danger">Failed</span>
                    {% else %}
                        <span class="badge badge-warning">Warnings</span>
                    {% endif %}
                </td>
                <td>
                    <a href="/validation/{{ submission.submission_id }}" class="btn btn-primary" style="padding: 0.5rem 1rem; font-size: 0.9rem;">View</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p style="text-align: center; color: #999; padding: 2rem;">No submissions yet</p>
    {% endif %}
</div>

<div style="text-align: center; margin-top: 2rem;">
    <a href="/" class="btn btn-secondary">Back to Dashboard</a>
</div>
{% endblock %}
