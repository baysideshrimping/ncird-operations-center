{% extends "base.html" %}

{% block title %}Geographic Map - NCIRD{% endblock %}

{% block content %}
<h1 style="color: #1e3a5f; margin-bottom: 2rem;">Geographic Coverage Map</h1>

<div class="card">
    <div class="card-header">Submission Status by Jurisdiction</div>
    <p style="margin: 1rem 0; color: #666;">
        Interactive map showing data submission status for all US states and territories.
    </p>

    <div style="display: flex; gap: 1rem; margin: 1rem 0;">
        <div><span class="badge badge-success">✅</span> Passed (Healthy)</div>
        <div><span class="badge badge-warning">⚠️</span> Warning/Issues</div>
        <div><span class="badge badge-danger">❌</span> Failed/Alert</div>
        <div><span class="badge badge-secondary">—</span> No Data</div>
    </div>

    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 1rem; margin-top: 2rem;">
        {% for jurisdiction in jurisdictions %}
        {% set status = jurisdiction_status.get(jurisdiction.abbr, {}) %}
        <div style="background: #f8f9fa; padding: 1rem; border-radius: 4px; border-left: 4px solid
            {% if status.status == 'passed' %}#28a745
            {% elif status.status == 'failed' %}#dc3545
            {% elif status.status == 'passed_with_warnings' %}#ffc107
            {% else %}#6c757d{% endif %};">
            <div style="font-weight: 600; margin-bottom: 0.5rem;">{{ jurisdiction.name }} ({{ jurisdiction.abbr }})</div>
            {% if status.stats %}
                <div style="font-size: 0.9rem; color: #666;">
                    <div>Total: {{ status.stats.total }}</div>
                    <div>Passed: {{ status.stats.passed }}</div>
                    <div>Failed: {{ status.stats.failed }}</div>
                    <div style="font-size: 0.85rem; margin-top: 0.5rem;">Last: {{ status.stats.last_submission }}</div>
                </div>
            {% else %}
                <div style="color: #999; font-size: 0.9rem;">No submissions</div>
            {% endif %}
        </div>
        {% endfor %}
    </div>
</div>

<div style="text-align: center; margin-top: 2rem;">
    <a href="/" class="btn btn-secondary">Back to Dashboard</a>
</div>
{% endblock %}
